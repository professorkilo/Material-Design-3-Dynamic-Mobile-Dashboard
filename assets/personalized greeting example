type: vertical-stack
cards:
  - type: custom:mushroom-title-card
    title: |
      {% set time = now().hour %} {% if time >= 18 %}
        ðŸŒ™ Evening, {{ user }}!
      {% elif time >= 12 %}
        â˜€ï¸ Afternoon, {{ user }}!
      {% elif time >= 5 %}
        ðŸŒ… Morning, {{ user }}!
      {% else %}
        ðŸŒŒ Welcome, {{ user }}!
      {% endif %}
    card_mod:
      style: |
        ha-card {
          animation: fadeInUp 1.0s ease-out;
        }
        @keyframes fadeInUp {
          from {
            opacity: 0;
            transform: translateY(20px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
  - type: custom:paper-buttons-row
    styles:
      justify-content: flex-start
      flex-wrap: wrap
      font-size: 0.9em
      line-height: 1.2em
      margin: 6px 0 20px 0
      width: 100%
    buttons:
      - layout: name
        name: Outside is
        styles:
          button:
            flex-basis: 1
            flex-shrink: 0
            animation: fadeIn 0.8s ease-out 0.3s both
          name:
            color: var(--primary-text-color)
        tap_action:
          action: none
      - layout: name|icon
        entity: weather.home
        name: >-
          {% set temp = state_attr('weather.home', 'temperature') %} {% set unit
          = state_attr('weather.home', 'temperature_unit') %} {% set condition =
          states('weather.home') | title %} {% if
          is_state('binary_sensor.outdoor_rain_sensor_water_leak', 'on') %}
            {{ temp }} {{ unit }}, Raining
          {% else %}
            {{ temp }} {{ unit }}, {{ condition }}
          {% endif %}
        icon: >-
          {% if is_state('binary_sensor.outdoor_rain_sensor_water_leak', 'on')
          %}
            mdi:weather-pouring
          {% else %}
            {{ states('sensor.weather_condition_icon') }}
          {% endif %}
        tap_action:
          action: navigate
          navigation_path: "#weather-panel"
        styles:
          icon:
            color: var(--md-sys-color-primary)
          name:
            color: var(--md-sys-color-primary)
            font-weight: bold
          button:
            padding: 2px 8px
            background-color: var(--md-sys-color-on-primary)
            border-radius: 24px
            flex-basis: 1
            flex-shrink: 0
            display: flex
            animation: slideInLeft 0.6s ease-out 0.5s both
            transition: all 0.3s ease
      - layout: name
        name: Â· Wind
        styles:
          button:
            flex-basis: 1
            flex-shrink: 0
            animation: fadeIn 0.8s ease-out 0.7s both
          name:
            color: var(--primary-text-color)
        tap_action:
          action: none
      - layout: name
        entity: weather.home
        name: >-
          {% set weather = states.weather.home.attributes %} {{
          weather.wind_speed }} {{ weather.wind_speed_unit }}
        tap_action:
          action: navigate
          navigation_path: "#weather-panel"
        styles:
          name:
            color: var(--md-sys-color-primary)
            font-weight: bold
          button:
            padding: 2px 8px
            background-color: var(--md-sys-color-on-primary)
            border-radius: 24px
            flex-basis: 1
            flex-shrink: 0
            display: flex
            animation: slideInLeft 0.6s ease-out 0.9s both
            transition: all 0.3s ease
      - layout: name
        name: Â· High
        styles:
          button:
            flex-basis: 1
            flex-shrink: 0
            animation: fadeIn 0.8s ease-out 1.1s both
          name:
            color: var(--primary-text-color)
        tap_action:
          action: none
      - layout: name
        entity: weather.home
        name: >-
          {% set forecast =
          state_attr('sensor.daily_weather_data_google_weather',
          'forecast_data') %} {% if forecast is defined and forecast.temperature
          is defined %}
            {{ forecast.temperature }} {{ state_attr('weather.home', 'temperature_unit') }}ðŸ”º
          {% else %}
            N/A {{ state_attr('weather.home', 'temperature_unit') }}ðŸ”º
          {% endif %}
        tap_action:
          action: navigate
          navigation_path: "#weather-panel"
        styles:
          name:
            color: var(--md-sys-color-primary)
            font-weight: bold
          button:
            padding: 2px 8px
            background-color: var(--md-sys-color-on-primary)
            border-radius: 24px
            flex-basis: 1
            flex-shrink: 0
            display: flex
            animation: slideInLeft 0.6s ease-out 1.3s both
            transition: all 0.3s ease
      - layout: name
        name: Low
        styles:
          button:
            flex-basis: 1
            flex-shrink: 0
            animation: fadeIn 0.8s ease-out 1.5s both
          name:
            color: var(--primary-text-color)
        tap_action:
          action: none
      - layout: name
        entity: weather.home
        name: >-
          {% set forecast =
          state_attr('sensor.daily_weather_data_google_weather',
          'forecast_data') %} {% if forecast is defined and forecast.temperature
          is defined %}
            {{ forecast.templow }} {{ state_attr('weather.home', 'temperature_unit') }}ðŸ”»
          {% else %}
            N/A {{ state_attr('weather.home', 'temperature_unit') }}ðŸ”»
          {% endif %}
        tap_action:
          action: navigate
          navigation_path: "#weather-panel"
        styles:
          name:
            color: var(--md-sys-color-primary)
            font-weight: bold
          button:
            padding: 2px 8px
            background-color: var(--md-sys-color-on-primary)
            border-radius: 24px
            flex-basis: 1
            flex-shrink: 0
            display: flex
            animation: slideInLeft 0.6s ease-out 1.7s both
            transition: all 0.3s ease
    card_mod:
      style: |
        ha-card {
          overflow: visible !important;
        }
        @keyframes fadeIn {
          from {
            opacity: 0;
          }
          to {
            opacity: 1;
          }
        }
        @keyframes slideInLeft {
          from {
            opacity: 0;
            transform: translateX(-40px);
          }
          to {
            opacity: 1;
            transform: translateX(0);
          }
        }
